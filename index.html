<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EriJu | å®˜æ–¹é¦–é </title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <style>
        :root { --nav-h: 52px; }
        body { font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "SF Pro Display", "Helvetica Neue", Arial, sans-serif; margin: 0; padding-top: var(--nav-h); overflow-x: hidden; background: #000; }
        
        /* Apple é¢¨æ ¼å°è¦½åˆ— */
        .glass-nav { 
            background: rgba(0, 0, 0, 0.75); 
            backdrop-filter: saturate(180%) blur(20px); 
            -webkit-backdrop-filter: saturate(180%) blur(20px); 
            z-index: 1000; 
            border-bottom: 0.5px solid rgba(255,255,255,0.1); 
        }

        .text-gradient { 
            background: linear-gradient(180deg, #fff 30%, rgba(255,255,255,0.5) 100%); 
            -webkit-background-clip: text; 
            -webkit-text-fill-color: transparent; 
        }

        .theme-dark { background: #000; color: #fff; }
        .theme-light { background: #f5f5f7; color: #1d1d1f; }
        .reveal { opacity: 0; transform: translateY(30px); }
        .rounded-apple { border-radius: 28px; }

        /* ä½¿ç”¨è€…é¸å–® (Dropdown) */
        .user-menu {
            opacity: 0;
            visibility: hidden;
            transform: translateY(10px);
            position: absolute;
            right: -10px;
            top: 40px;
            width: 180px;
            background: rgba(28, 28, 30, 0.98);
            backdrop-filter: blur(20px);
            border: 0.5px solid rgba(255,255,255,0.15);
            border-radius: 14px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.4);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 1001;
        }
        /* ç•¶æ»‘é¼ ç§»å…¥ auth-section æ™‚é¡¯ç¤ºé¸å–® */
        #auth-section:hover .user-menu { opacity: 1; visibility: visible; transform: translateY(0); }
    </style>
</head>
<body>

    <nav class="glass-nav fixed top-0 w-full h-[52px]">
        <div class="max-w-screen-xl mx-auto h-full flex items-center justify-between px-6">
            <a href="index.html" class="flex items-center group">
                <img src="photo/S__38223874.jpg" alt="Eric Justin" 
                     class="w-7 h-7 rounded-full object-cover ring-1 ring-white/20 group-hover:ring-white/50 transition duration-500">
                <span class="ml-2.5 text-sm font-semibold tracking-tight text-white/90">EriJu</span>
            </a>
            <div class="flex items-center gap-6 md:gap-9 text-[12px] text-white/70 font-medium">
                <a href="catalog.html" class="hover:text-white transition">é¸è³¼</a>
                
                <div id="auth-section" class="relative h-full flex items-center">
                    <button id="login-btn" onclick="loginWithGoogle()" class="hover:text-white transition">ç™»å…¥</button>
                    </div>

                <a href="cart.html" class="opacity-70 hover:opacity-100 transition text-[14px] relative">
                    ğŸ›’
                    <span id="cart-dot" class="hidden absolute -top-1 -right-1 w-2 h-2 bg-red-500 rounded-full"></span>
                </a>
            </div>
        </div>
    </nav>

    <section class="theme-dark min-h-[92vh] flex flex-col items-center justify-center text-center px-6">
        <div class="reveal">
            <h1 class="text-gradient text-6xl md:text-[100px] font-bold tracking-tighter mb-4">30åˆ†é˜</h1>
            <h2 class="text-xl md:text-3xl font-medium mb-10 text-white/80">2026ã€‚å¤§è¢å¹•ä¸Šè¦‹ã€‚</h2>
            <div class="flex flex-col md:flex-row gap-5 justify-center items-center">
                <a href="catalog.html" class="bg-[#0071e3] text-white px-8 py-3 rounded-full font-semibold hover:bg-[#0077ed] transition-all transform hover:scale-105">ç«‹å³è³¼è²·</a>
                <a href="#features" class="text-[#2997ff] text-lg hover:underline decoration-1 underline-offset-4">äº†è§£æ›´å¤š ></a>
            </div>
        </div>
        
        <div class="mt-20 w-full max-w-5xl reveal px-4">
            <img src="photo/30åˆ†é˜.png" 
                 class="w-full h-auto rounded-apple shadow-[0_40px_100px_rgba(0,0,0,0.6)] transform transition duration-1000 hover:scale-[1.02]">
        </div>
    </section>

    <section id="features" class="theme-light py-32 md:py-48">
        <div class="max-w-screen-xl mx-auto px-6">
            <div class="mb-20 reveal">
                <h2 class="text-5xl md:text-7xl font-bold tracking-tight">å…¶ä»–å“é …ã€‚</h2>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-10">
                <div class="reveal bg-white rounded-apple p-12 flex flex-col justify-between h-[600px] shadow-sm border border-gray-100 overflow-hidden relative group text-left">
                    <div class="z-10">
                        <span class="text-orange-600 font-bold text-xs uppercase tracking-widest">ä¸è¦æ”¾å±</span>
                        <h3 class="text-4xl font-bold mt-2">å¯æ„›å°å¡</h3>
                        <p class="text-gray-500 text-xl mt-4">æ­·ä¾†æœ€èŒã€‚å¯æ„›åˆ°èµ·é£›!</p>
                    </div>
                    <img src="photo/ä»ç„¶.png" class="absolute bottom-20 left-1/2 -translate-x-1/2 max-h-[300px] object-contain group-hover:scale-110 transition duration-1000 ease-out">
                    <div class="z-10">
                        <a href="catalog.html" class="text-[#0066cc] font-semibold text-lg hover:underline">ç«‹åˆ»é¸è³¼ ></a>
                    </div>
                </div>
                <div class="reveal bg-white rounded-apple p-12 flex flex-col justify-between h-[600px] shadow-sm border border-gray-100 overflow-hidden relative group text-left">
                    <div class="z-10">
                        <span class="text-blue-600 font-bold text-xs uppercase tracking-widest">å…¨æ–°ä»ç„¶</span>
                        <h3 class="text-4xl font-bold mt-2">å°ˆæ¥­å·å–</h3>
                        <p class="text-gray-500 text-xl mt-4">æ•æ‰æ¯å€‹ Airpods Proã€‚</p>
                    </div>
                    <img src="photo/S__38223874.jpg" class="absolute bottom-20 left-1/2 -translate-x-1/2 max-h-[300px] object-contain group-hover:scale-110 transition duration-1000 ease-out">
                    <div class="z-10">
                        <a href="catalog.html" class="text-[#0066cc] font-semibold text-lg hover:underline">ç«‹åˆ»é¸è³¼ ></a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="theme-dark py-48 text-center px-6">
        <div class="max-w-4xl mx-auto reveal">
            <h2 class="text-4xl md:text-7xl font-bold leading-tight mb-10 tracking-tight">
                "é€™ä¸åƒ…æ˜¯ä¸€å€‹å±ï¼Œ<br><span class="text-white/40">æ›´æ˜¯å°æœªä¾†çš„é‡æ–°å®šç¾©ã€‚"</span>
            </h2>
            <p class="text-gray-500 text-xl font-medium tracking-wide">é è¨ˆ 2026 å¹´æ˜¥å­£æ­£å¼ç™»å ´</p>
        </div>
    </section>

    <footer class="theme-dark border-t border-white/5 py-24 px-6 text-center">
        <p class="text-gray-600 text-[11px] tracking-widest uppercase">Copyright Â© 2026 Eric Justin. ä¿ç•™æ‰€æœ‰æ¬Šåˆ©ã€‚</p>
    </footer>

    <script>
        // --- 1. Supabase åˆå§‹åŒ– ---
        const SUPABASE_URL = 'https://oikubhlwdbxrfhifqusn.supabase.co'; 
        const SUPABASE_ANON_KEY = 'sb_publishable_jwPs6RwbH4W4qg1ttjjZog_BcTN8VJy';
        const _supabase = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

        // --- 2. æŒä¹…åŒ–ç™»å…¥åŠŸèƒ½ ---
        async function loginWithGoogle() {
            const btn = document.getElementById('login-btn');
            btn.innerText = "æ­£åœ¨é€£æ¥...";
            try {
                const { error } = await _supabase.auth.signInWithOAuth({
                    provider: 'google',
                    options: { 
                        // redirectTo: window.location.origin + window.location.pathname,
                        persistSession: true // å¼·åˆ¶æŒä¹…åŒ–å„²å­˜ Session
                    }
                });
                if (error) throw error;
            } catch (err) {
                console.error("Login Error:", err.message);
                btn.innerText = "ç™»å…¥å¤±æ•—";
                setTimeout(() => btn.innerText = "ç™»å…¥", 2000);
            }
        }

        async function logout() {
            await _supabase.auth.signOut();
            location.reload(); // ç™»å‡ºå¾Œåˆ·æ–°é é¢å›æ­¸åˆå§‹ç‹€æ…‹
        }

        // --- 3. UI ç‹€æ…‹ç›£è½ (æ ¸å¿ƒï¼šä¿æŒé ­åƒèˆ‡é¸å–®) ---
        function handleAuthUI() {
            const authSection = document.getElementById('auth-section');
            
            _supabase.auth.onAuthStateChange((event, session) => {
                console.log("Auth Event:", event); // é™¤éŒ¯è§€å¯Ÿç”¨

                if (session && session.user) {
                    const user = session.user;
                    const avatar = user.user_metadata.avatar_url || 'photo/S__38223874.jpg';
                    
                    authSection.innerHTML = `
                        <div class="flex items-center cursor-pointer py-2">
                            <img src="${avatar}" class="w-7 h-7 rounded-full border border-white/20 hover:border-white/50 transition">
                            <div class="user-menu">
                                <div class="px-5 py-4 border-b border-white/10 text-left">
                                    <p class="text-white text-[12px] font-semibold truncate">${user.user_metadata.full_name || 'ä½¿ç”¨è€…'}</p>
                                    <p class="text-gray-500 text-[10px] truncate mt-1">${user.email}</p>
                                </div>
                                <div class="py-1 text-left">
                                    <a href="orders.html" class="block px-5 py-3 text-white/80 text-[11px] hover:bg-white/10 transition">æˆ‘çš„è¨‚å–®ç´€éŒ„</a>
                                    <button onclick="logout()" class="w-full text-left px-5 py-3 text-red-400 text-[11px] hover:bg-white/10 transition font-medium">
                                        ç™»å‡ºå¸³è™Ÿ
                                    </button>
                                </div>
                            </div>
                        </div>
                    `;
                } else {
                    // è‹¥æœªç™»å…¥ï¼Œé‚„åŸç™»å…¥æŒ‰éˆ•
                    authSection.innerHTML = `<button id="login-btn" onclick="loginWithGoogle()" class="hover:text-white transition">ç™»å…¥</button>`;
                }
            });
        }

        // --- 4. è³¼ç‰©è»Šç´…é»èˆ‡ GSAP å‹•ç•« ---
        function checkCartDot() {
            const cart = JSON.parse(localStorage.getItem('ej_cart') || '[]');
            const dot = document.getElementById('cart-dot');
            if (dot && cart.length > 0) {
                dot.classList.remove('hidden');
                gsap.to(dot, { scale: 1.3, duration: 0.8, repeat: -1, yoyo: true });
            }
        }

        gsap.registerPlugin(ScrollTrigger);
        window.addEventListener('DOMContentLoaded', () => {
            handleAuthUI();
            checkCartDot();

            // å…ƒç´ æµ®ç¾å‹•ç•«
            gsap.utils.toArray(".reveal").forEach(el => {
                gsap.to(el, {
                    opacity: 1, y: 0, duration: 1.2, ease: "expo.out",
                    scrollTrigger: { trigger: el, start: "top 85%", toggleActions: "play none none none" }
                });
            });

            // å°è¦½åˆ—æ²å‹•è®Šè‰²
            ScrollTrigger.create({
                start: "top top",
                onUpdate: (self) => {
                    const opacity = Math.min(0.75 + self.scroll() / 400, 0.95);
                    gsap.to(".glass-nav", { backgroundColor: `rgba(0, 0, 0, ${opacity})`, duration: 0.2 });
                }
            });
        });
    </script>
</body>
</html>